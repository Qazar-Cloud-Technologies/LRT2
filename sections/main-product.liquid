<product-info
  id="MainProduct-{{ section.id }}"
  class="section-{{ section.id }}-padding gradient color-{{ section.settings.color_scheme }}"
  data-section="{{ section.id }}"
  data-product-id="{{ product.id }}"
  data-update-url="true"
  data-url="{{ product.url }}"
>
  {{ 'section-main-product.css' | asset_url | stylesheet_tag }}
  {{ 'component-price.css' | asset_url | stylesheet_tag }}
  {{ 'component-slider.css' | asset_url | stylesheet_tag }}
  
  {% unless product.has_only_default_variant %}
    {{ 'component-product-variant-picker.css' | asset_url | stylesheet_tag }}
  {% endunless %}

  {%- style -%}
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
    }

    @media screen and (min-width: 750px) {
      .section-{{ section.id }}-padding {
        padding-top: {{ section.settings.padding_top }}px;
        padding-bottom: {{ section.settings.padding_bottom }}px;
      }
    }

    /* Custom Gallery Styles - Responsive */
    .product {
      max-width: 90vw;
      margin: 0 auto;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      min-height: calc(100vh - 100px);
      padding: 40px 2vw;
    }

    .product__container {
      display: grid;
      grid-template-columns: minmax(35%, 45%) minmax(45%, 65%);
      gap: 3vw;
      align-items: start;
      padding: 2vw;
      width: 100%;
      max-width: 90vw;
    }

    /* Gallery Section */
    .product__media-wrapper {
      position: relative;
      width: 100%;
      display: flex;
      flex-direction: column;
    }

    .product__media-gallery {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 100%;
    }

    /* Main Image Container - Responsive */
    .product__main-image-container {
      position: relative;
      width: 100%;
      max-width: min(450px, 40vw);
      aspect-ratio: 1;
      margin: 0 auto;
      background: linear-gradient(
        135deg,
        rgba(250, 250, 250, 0.95) 0%,
        rgba(255, 255, 255, 0.98) 50%,
        rgba(250, 250, 250, 0.95) 100%
      );
      border: 2px solid rgba(255, 0, 0, 0.15);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.08),
        0 2px 12px rgba(0, 0, 0, 0.04);
      backdrop-filter: blur(10px);
    }

    .product__main-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      padding: 20px;
      transition: transform 0.3s ease;
    }

    .product__main-image-container:hover .product__main-image {
      transform: scale(1.05);
    }

    /* Thumbnail Container - Responsive */
    .product__thumbnails-wrapper {
      position: relative;
      width: 100%;
      max-width: min(450px, 40vw);
      margin: 0 auto;
    }

    .product__thumbnails-container {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      scroll-behavior: smooth;
      padding: 4px;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    .product__thumbnails-container::-webkit-scrollbar {
      display: none;
    }

    .product__thumbnail {
      flex: 0 0 calc(33.333% - 8px);
      max-width: min(140px, 12vw);
      aspect-ratio: 16/9;
      background: white;
      border: 2px solid rgba(255, 0, 0, 0.1);
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    .product__thumbnail:hover {
      border-color: rgba(255, 0, 0, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(255, 0, 0, 0.2);
    }

    .product__thumbnail.active {
      border-color: rgba(255, 0, 0, 0.6);
      box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.1);
    }

    .product__thumbnail-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Navigation Arrows */
    .thumbnails-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, rgba(255, 0, 0, 0.9), rgba(200, 0, 0, 0.9));
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .thumbnails-nav:hover {
      background: linear-gradient(135deg, rgba(255, 0, 0, 1), rgba(200, 0, 0, 1));
      transform: translateY(-50%) scale(1.1);
      box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
    }

    .thumbnails-nav--prev {
      left: -20px;
    }

    .thumbnails-nav--next {
      right: -20px;
    }

    .thumbnails-nav svg {
      width: 20px;
      height: 20px;
      stroke: white;
      stroke-width: 2;
      fill: none;
    }

    /* Product Information - Increased Text Sizes */
    .product__info {
      position: sticky;
      top: 100px;
    }

    /* Make product info take full width - Responsive */
    .product__info-wrapper {
      width: 100%;
      display: flex;
      flex-direction: column;
    }

    .product__info-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      gap: clamp(15px, 2vw, 20px);
    }

    .product__title {
      font-size: clamp(1.8rem, 3vw, 2.5rem) !important;
      font-weight: 700;
      color: #111;
      margin-bottom: clamp(12px, 1.5vw, 16px);
      line-height: 1.2;
      letter-spacing: -0.02em;
    }

    .product__title h1,
    .product__title h2,
    .product__title h3 {
      font-size: inherit !important;
    }

    /* Increased Price Size */
    .price__container {
      margin-bottom: 24px;
    }

    .price-item {
      font-size: clamp(1.6rem, 2.5vw, 2.2rem) !important;
      font-weight: 600;
      color: #c00;
    }

    .price__regular .price-item--regular {
      font-size: clamp(1.5rem, 2.3vw, 2rem) !important;
    }

    .price__sale .price-item--sale {
      font-size: clamp(1.2rem, 1.8vw, 1.6rem) !important;
      color: #666;
    }

    /* Increased Description Text - Responsive */
    .product__description {
      font-size: clamp(1rem, 1.5vw, 1.3rem) !important;
      line-height: 1.7;
      color: #333;
      margin-bottom: clamp(15px, 2vw, 25px);
    }

    .product__description p {
      margin-bottom: 20px;
      font-size: inherit !important;
    }

    .product__description small {
      font-size: 1.6rem !important;
    }

    /* Product Form Text Sizes - Responsive */
    .product-form__label {
      font-size: clamp(0.95rem, 1.4vw, 1.2rem) !important;
      font-weight: 600;
      color: #333;
      margin-bottom: clamp(8px, 1vw, 12px);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .product-form__input label {
      font-size: clamp(0.9rem, 1.3vw, 1.1rem) !important;
    }

    /* Variant Picker - Responsive 2x2 Grid */
    fieldset.product-form__input .form__label {
      font-size: clamp(1rem, 1.5vw, 1.3rem) !important;
      font-weight: 600;
      margin-bottom: 15px;
    }

    /* Create 2x2 grid for variant options */
    fieldset.product-form__input--pill {
      display: grid !important;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 25px;
    }

    fieldset.product-form__input--pill legend {
      grid-column: 1 / -1;
    }

    fieldset.product-form__input--pill input[type="radio"] {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    fieldset.product-form__input--pill label {
      display: flex !important;
      align-items: center;
      justify-content: center;
      font-size: clamp(0.9rem, 1.3vw, 1.1rem) !important;
      padding: clamp(10px, 1.2vw, 14px) clamp(15px, 2vw, 20px);
      border: 2px solid rgba(255, 0, 0, 0.2);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
      text-align: center;
      min-height: 50px;
    }

    fieldset.product-form__input--pill label:hover {
      border-color: rgba(255, 0, 0, 0.5);
      background: rgba(255, 0, 0, 0.05);
      transform: translateY(-2px);
    }

    fieldset.product-form__input--pill input[type="radio"]:checked + label {
      background: linear-gradient(135deg, rgba(255, 0, 0, 0.1), rgba(255, 0, 0, 0.05));
      border-color: rgba(255, 0, 0, 0.6);
      font-weight: 600;
      box-shadow: 0 2px 10px rgba(255, 0, 0, 0.2);
    }

    /* For first 4 items only in 2x2 */
    fieldset.product-form__input--pill:first-of-type input[type="radio"]:nth-of-type(n+5),
    fieldset.product-form__input--pill:first-of-type input[type="radio"]:nth-of-type(n+5) + label {
      display: none;
    }

    /* Quantity Selector - Responsive */
    .quantity__label {
      font-size: clamp(1.1rem, 1.6vw, 1.6rem) !important;
    }

    .quantity__input {
      font-size: clamp(1.2rem, 1.8vw, 1.8rem) !important;
      font-weight: 600;
      padding: clamp(8px, 1vw, 12px);
      min-width: clamp(80px, 10vw, 100px);
    }

    /* Buttons - Responsive */
    .product-form__submit,
    .shopify-payment-button__button {
      font-size: clamp(1.1rem, 1.6vw, 1.4rem) !important;
      padding: clamp(12px, 1.5vw, 16px) clamp(24px, 3vw, 32px) !important;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Other Product Information - Responsive */
    .product__text,
    .product__inventory,
    .product__sku {
      font-size: clamp(1rem, 1.5vw, 1.5rem) !important;
    }

    /* Accordion/Collapsible Content - Responsive */
    .accordion__title {
      font-size: clamp(1.2rem, 1.7vw, 1.7rem) !important;
    }

    .accordion__content {
      font-size: clamp(1.1rem, 1.6vw, 1.6rem) !important;
      line-height: 1.8;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .product__container {
        grid-template-columns: 1fr;
        gap: 40px;
      }

      .product__title {
        font-size: 2.5rem !important;
      }

      .price-item {
        font-size: 2.2rem !important;
      }

      .product__description {
        font-size: 1.4rem !important;
      }

      .product-form__submit {
        font-size: 1.4rem !important;
        padding: 18px 32px !important;
      }

      .thumbnails-nav {
        width: 35px;
        height: 35px;
      }

      .thumbnails-nav--prev {
        left: -15px;
      }

      .thumbnails-nav--next {
        right: -15px;
      }
    }
  {%- endstyle -%}

  <script src="{{ 'product-info.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

  {% assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src' %}
  <div class="page-width">
    <div class="product__container">
      <!-- Custom Gallery Section with Thumbnails -->
      <div class="product__media-wrapper">
        <div class="product__media-gallery">
          <!-- Main Image -->
          <div class="product__main-image-container">
            {%- if product.featured_image -%}
              <img 
                id="main-product-image"
                src="{{ product.featured_image | image_url: width: 1024 }}"
                alt="{{ product.featured_image.alt | escape }}"
                class="product__main-image"
                loading="eager"
              >
            {%- else -%}
              {{ 'product-1' | placeholder_svg_tag }}
            {%- endif -%}
          </div>

          <!-- Thumbnails with Navigation -->
          {%- if product.images.size > 1 -%}
            <div class="product__thumbnails-wrapper">
              <!-- Previous Arrow -->
              <button class="thumbnails-nav thumbnails-nav--prev" aria-label="Previous thumbnails" type="button">
                <svg viewBox="0 0 24 24">
                  <path d="M15 18l-6-6 6-6" />
                </svg>
              </button>

              <!-- Thumbnails Container -->
              <div class="product__thumbnails-container" id="thumbnails-container">
                {%- for image in product.images limit: 6 -%}
                  <div 
                    class="product__thumbnail {% if forloop.first %}active{% endif %}"
                    data-image-id="{{ image.id }}"
                    data-image-url="{{ image | image_url: width: 1024 }}"
                    tabindex="0"
                    role="button"
                  >
                    <img 
                      src="{{ image | image_url: width: 300 }}"
                      alt="{{ image.alt | escape }}"
                      class="product__thumbnail-image"
                      loading="lazy"
                    >
                  </div>
                {%- endfor -%}
              </div>

              <!-- Next Arrow -->
              <button class="thumbnails-nav thumbnails-nav--next" aria-label="Next thumbnails" type="button">
                <svg viewBox="0 0 24 24">
                  <path d="M9 18l6-6-6-6" />
                </svg>
              </button>
            </div>
          {%- endif -%}
        </div>
      </div>

      <!-- Product Information -->
      <div class="product__info-wrapper grid__item">
        <section
          id="ProductInfo-{{ section.id }}"
          class="product__info-container{% if section.settings.enable_sticky_info %} product__column-sticky{% endif %}"
        >
          {%- assign product_form_id = 'product-form-' | append: section.id -%}

          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when '@app' -%}
                {% render block %}
                
              {%- when 'text' -%}
                <p
                  class="product__text inline-richtext{% if block.settings.text_style == 'uppercase' %} caption-with-letter-spacing{% elsif block.settings.text_style == 'subtitle' %} subtitle{% endif %}"
                  {{ block.shopify_attributes }}
                >
                  {{- block.settings.text -}}
                </p>
                
              {%- when 'title' -%}
                <div class="product__title" {{ block.shopify_attributes }}>
                  <h1>{{ product.title | escape }}</h1>
                </div>
                
              {%- when 'price' -%}
                <div id="price-{{ section.id }}" role="status" {{ block.shopify_attributes }}>
                  {%- render 'price',
                    product: product,
                    use_variant: true,
                    show_badges: true,
                    price_class: 'price--large'
                  -%}
                </div>
                
              {%- when 'description' -%}
                {%- if product.description != blank -%}
                  <div class="product__description rte" {{ block.shopify_attributes }}>
                    {{ product.description }}
                  </div>
                {%- endif -%}
                
              {%- when 'variant_picker' -%}
                {% render 'product-variant-picker', 
                  product: product, 
                  block: block, 
                  product_form_id: product_form_id 
                %}
                
              {%- when 'quantity_selector' -%}
                <div
                  id="Quantity-Form-{{ section.id }}"
                  class="product-form__input product-form__quantity"
                  {{ block.shopify_attributes }}
                >
                  <label class="quantity__label form__label" for="Quantity-{{ section.id }}">
                    {{ 'products.product.quantity.label' | t }}
                  </label>
                  <quantity-input class="quantity" data-url="{{ product.url }}" data-section="{{ section.id }}">
                    <button class="quantity__button" name="minus" type="button">
                      <span class="visually-hidden">
                        {{- 'products.product.quantity.decrease' | t: product: product.title | escape -}}
                      </span>
                      <svg class="icon icon-minus" fill="none" viewBox="0 0 10 2">
                        <path d="M.5 1h9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/>
                      </svg>
                    </button>
                    <input
                      class="quantity__input"
                      type="number"
                      name="quantity"
                      id="Quantity-{{ section.id }}"
                      min="1"
                      value="1"
                      form="{{ product_form_id }}"
                    >
                    <button class="quantity__button" name="plus" type="button">
                      <span class="visually-hidden">
                        {{- 'products.product.quantity.increase' | t: product: product.title | escape -}}
                      </span>
                      <svg class="icon icon-plus" fill="none" viewBox="0 0 10 10">
                        <path d="M.5 5h9M5 .5v9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/>
                      </svg>
                    </button>
                  </quantity-input>
                </div>
                
              {%- when 'buy_buttons' -%}
                {%- render 'buy-buttons',
                  block: block,
                  product: product,
                  product_form_id: product_form_id,
                  section_id: section.id,
                  show_pickup_availability: true
                -%}
                
              {%- when 'collapsible_tab' -%}
                <div class="product__accordion accordion" {{ block.shopify_attributes }}>
                  <details id="Details-{{ block.id }}-{{ section.id }}">
                    <summary>
                      <div class="summary__title">
                        <h2 class="h4 accordion__title inline-richtext">
                          {{ block.settings.heading | default: block.settings.page.title | escape }}
                        </h2>
                      </div>
                      <svg class="icon icon-caret" aria-hidden="true" focusable="false">
                        <use href="#icon-caret">
                      </svg>
                    </summary>
                    <div class="accordion__content rte" id="ProductAccordion-{{ block.id }}-{{ section.id }}">
                      {{ block.settings.content }}
                      {{ block.settings.page.content }}
                    </div>
                  </details>
                </div>
                
              {%- when 'share' -%}
                {% liquid
                  assign share_url = product.selected_variant.url | default: product.url | prepend: request.origin
                  render 'share-button', block: block, share_link: share_url
                %}
                
            {%- endcase -%}
          {%- endfor -%}
        </section>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const mainImage = document.getElementById('main-product-image');
      const thumbnails = document.querySelectorAll('.product__thumbnail');
      const thumbnailsContainer = document.getElementById('thumbnails-container');
      const prevButton = document.querySelector('.thumbnails-nav--prev');
      const nextButton = document.querySelector('.thumbnails-nav--next');
      
      if (!mainImage || thumbnails.length === 0) return;
      
      // Image swap functionality
      thumbnails.forEach((thumbnail) => {
        thumbnail.addEventListener('click', function() {
          const newImageUrl = this.dataset.imageUrl;
          const currentMainSrc = mainImage.src;
          
          // Swap images
          mainImage.src = newImageUrl;
          mainImage.alt = this.querySelector('.product__thumbnail-image').alt;
          
          // Update active state
          thumbnails.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
        });
        
        // Keyboard accessibility
        thumbnail.addEventListener('keypress', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            this.click();
          }
        });
      });
      
      // Thumbnail navigation
      if (prevButton && nextButton && thumbnailsContainer) {
        const scrollAmount = 320; // Width of about one thumbnail plus gap
        
        prevButton.addEventListener('click', function() {
          thumbnailsContainer.scrollBy({
            left: -scrollAmount,
            behavior: 'smooth'
          });
        });
        
        nextButton.addEventListener('click', function() {
          thumbnailsContainer.scrollBy({
            left: scrollAmount,
            behavior: 'smooth'
          });
        });
      }
    });
  </script>
</product-info>

{% schema %}
{
  "name": "Product Information",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_sticky_info",
      "default": true,
      "label": "Enable sticky product info on desktop"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "text",
          "default": "Text block",
          "label": "Text"
        },
        {
          "type": "select",
          "id": "text_style",
          "options": [
            {
              "value": "body",
              "label": "Body"
            },
            {
              "value": "subtitle",
              "label": "Subtitle"
            },
            {
              "value": "uppercase",
              "label": "Uppercase"
            }
          ],
          "default": "body",
          "label": "Text style"
        }
      ]
    },
    {
      "type": "title",
      "name": "Title",
      "limit": 1
    },
    {
      "type": "price",
      "name": "Price",
      "limit": 1
    },
    {
      "type": "description",
      "name": "Description",
      "limit": 1
    },
    {
      "type": "variant_picker",
      "name": "Variant picker",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_type",
          "options": [
            {
              "value": "dropdown",
              "label": "Dropdown"
            },
            {
              "value": "button",
              "label": "Pills"
            }
          ],
          "default": "button",
          "label": "Type"
        }
      ]
    },
    {
      "type": "quantity_selector",
      "name": "Quantity selector",
      "limit": 1
    },
    {
      "type": "buy_buttons",
      "name": "Buy buttons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "Show dynamic checkout buttons",
          "info": "Using the payment methods available on your store, customers see their preferred option, like PayPal or Apple Pay. [Learn more](https://help.shopify.com/manual/using-themes/change-the-layout/dynamic-checkout)"
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "default": true,
          "label": "Show recipient form for gift cards",
          "info": "Only shows for products with the gift card product type."
        }
      ]
    },
    {
      "type": "share",
      "name": "Share",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "share_label",
          "label": "Label",
          "default": "Share"
        },
        {
          "type": "paragraph",
          "content": "If you include a link in social media posts, the page's featured image will be shown as the preview image. [Learn more](https://help.shopify.com/manual/online-store/images/showing-social-media-thumbnail-images)"
        }
      ]
    },
    {
      "type": "collapsible_tab",
      "name": "Collapsible tab",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Collapsible tab",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Tab content"
        },
        {
          "type": "page",
          "id": "page",
          "label": "Tab content from page"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Information",
      "blocks": [
        {
          "type": "title"
        },
        {
          "type": "price"
        },
        {
          "type": "description"
        },
        {
          "type": "variant_picker"
        },
        {
          "type": "quantity_selector"
        },
        {
          "type": "buy_buttons"
        },
        {
          "type": "share"
        }
      ]
    }
  ]
}
{% endschema %}