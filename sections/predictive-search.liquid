{% comment %}theme-check-disable ImgLazyLoading{% endcomment %}

<style>
  /* Custom Predictive Search Styles - Light Theme with Better Readability */

  /* Main container - ensure white background */
  .predictive-search {
    background-color: #ffffff !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
    border: 1px solid #e0e0e0 !important;
  }

  /* Results wrapper - white background */
  .predictive-search__results-groups-wrapper {
    background-color: #ffffff !important;
    border-bottom: 1px solid #f0f0f0 !important;
  }

  /* Headings - better contrast */
  .predictive-search__heading {
    color: #333333 !important;
    border-bottom: 1px solid #f0f0f0 !important;
    font-size: 1.4rem !important;
    font-weight: 600 !important;
  }

  /* List items - white background with hover effect */
  .predictive-search__list-item {
    background-color: #ffffff !important;
  }

  .predictive-search__list-item[aria-selected='true'] > *,
  .predictive-search__list-item:hover > * {
    background-color: #f8f8f8 !important;
    color: #000000 !important;
  }

  /* Product items - ensure white background */
  .predictive-search__item {
    background-color: #ffffff !important;
    color: #333333 !important;
    padding: 1.5rem 2rem !important;
    transition: background-color 0.2s ease !important;
  }

  .predictive-search__item:hover,
  .predictive-search__item[aria-selected='true'] {
    background-color: #f8f8f8 !important;
  }

  /* Product images - make them bigger */
  .predictive-search__item--link-with-thumbnail {
    grid-template-columns: 8rem 1fr !important; /* Increased from 5rem */
    grid-column-gap: 2rem !important;
  }

  .predictive-search__image {
    width: 80px !important; /* Increased from 50px */
    height: 80px !important;
    object-fit: cover !important;
    border-radius: 8px !important;
    background-color: #ffffff !important;
    border: 1px solid #f0f0f0 !important;
  }

  /* Text sizing - make text bigger */
  .predictive-search__item-heading {
    font-size: 1.6rem !important; /* Increased size */
    color: #000000 !important;
    font-weight: 500 !important;
    line-height: 1.3 !important;
  }

  .predictive-search__item-heading.h5 {
    font-size: 1.6rem !important;
  }

  /* Vendor text */
  .predictive-search__item-vendor {
    font-size: 1.2rem !important; /* Increased from 0.9rem */
    color: #666666 !important;
    font-weight: 400 !important;
  }

  /* Price text */
  .predictive-search__item-price {
    margin-top: 0.5rem !important;
    display: flex !important;
    gap: 0.8rem !important;
    align-items: center !important;
  }
  
  .predictive-search__item .price {
    color: #ff0000 !important;
    font-size: 1.5rem !important; /* Increased from 1.2rem */
    font-weight: 600 !important;
  }
  
  .predictive-search__item .price--on-sale {
    color: #ff0000 !important;
    font-weight: 700 !important;
  }
  
  .predictive-search__item .price--compare {
    color: #999999 !important;
    text-decoration: line-through !important;
    font-size: 1.3rem !important;
    font-weight: 400 !important;
  }

  /* Query results - better contrast */
  .predictive-search__item-query-result {
    color: #000000 !important;
  }

  .predictive-search__item-query-result mark {
    color: #000000 !important;
    background-color: #ffeb3b !important;
    padding: 0 2px !important;
    border-radius: 2px !important;
  }

  /* Mobile specific styles - even bigger on mobile */
  @media screen and (max-width: 749px) {
    .predictive-search {
      background-color: #ffffff !important;
      border: 1px solid #e0e0e0 !important;
    }
    
    /* Bigger images on mobile */
    .predictive-search__item--link-with-thumbnail {
      grid-template-columns: 10rem 1fr !important; /* Even bigger on mobile */
      grid-column-gap: 1.5rem !important;
    }
    
    .predictive-search__image {
      width: 100px !important; /* Bigger on mobile */
      height: 100px !important;
    }
    
    /* Bigger text on mobile */
    .predictive-search__item-heading {
      font-size: 1.8rem !important; /* Bigger on mobile */
      line-height: 1.4 !important;
    }
    
    .predictive-search__item-heading.h5 {
      font-size: 1.8rem !important;
    }
    
    .predictive-search__item-vendor {
      font-size: 1.4rem !important; /* Bigger on mobile */
    }
    
    .predictive-search__item .price {
      font-size: 1.7rem !important; /* Bigger on mobile */
    }
    
    .predictive-search__item .price--compare {
      font-size: 1.5rem !important; /* Slightly smaller for compare price */
    }
    
    .predictive-search__item-price {
      margin-top: 0.7rem !important;
    }
    
    /* Bigger padding on mobile for easier tapping */
    .predictive-search__item {
      padding: 2rem !important;
    }
    
    /* Section headings bigger on mobile */
    .predictive-search__heading {
      font-size: 1.6rem !important;
      padding: 2rem 0 1rem !important;
    }
  }

  /* Ensure all backgrounds are white */
  .predictive-search__result-group {
    background-color: #ffffff !important;
  }

  .predictive-search__pages-wrapper {
    background-color: #ffffff !important;
  }

  .predictive-search__results-list {
    background-color: #ffffff !important;
  }

  /* Remove dark shadows and use lighter ones */
  predictive-search[open] .predictive-search {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;
  }

  /* Loading state - white background */
  .predictive-search__loading-state {
    background-color: #ffffff !important;
  }

  /* Ensure spinner is visible */
  predictive-search .spinner {
    border-color: #ff0000 !important;
  }

  /* Search button styling */
  .predictive-search__search-for-button {
    background-color: #ffffff !important;
    color: #333333 !important;
    border-top: 1px solid #f0f0f0 !important;
  }

  .predictive-search__search-for-button:hover {
    background-color: #f8f8f8 !important;
  }

  /* Arrow icons */
  .predictive-search__item--term .icon-arrow {
    color: #ff0000 !important;
  }

  /* Ensure text is always dark and readable */
  .predictive-search__item-content * {
    color: #333333 !important;
  }

  .predictive-search__item-content .price {
    color: #ff0000 !important;
  }

  /* Fix for any inherited dark backgrounds */
  .predictive-search * {
    background-color: transparent !important;
  }

  .predictive-search,
  .predictive-search__results-groups-wrapper,
  .predictive-search__result-group,
  .predictive-search__item,
  .predictive-search__list-item {
    background-color: #ffffff !important;
  }

  /* Hover states should be subtle gray */
  .predictive-search__item:hover,
  .predictive-search__list-item:hover > * {
    background-color: #fafafa !important;
  }
</style>

{%- if predictive_search.performed -%}
  {% assign first_column_results_size = predictive_search.resources.queries.size
    | plus: predictive_search.resources.collections.size
    | plus: predictive_search.resources.pages.size
    | plus: predictive_search.resources.articles.size
  %}
  <div id="predictive-search-results" role="listbox">
    {%- if first_column_results_size > 0 or predictive_search.resources.products.size > 0 -%}
      <div
        id="predictive-search-results-groups-wrapper"
        class="predictive-search__results-groups-wrapper{% unless predictive_search.resources.products.size > 0 %} predictive-search__results-groups-wrapper--no-products{% endunless %}{% unless predictive_search.resources.queries.size > 0 or predictive_search.resources.collections.size > 0 %} predictive-search__results-groups-wrapper--no-suggestions{% endunless %}"
      >
    {%- endif -%}
    {%- if first_column_results_size > 0 -%}
      <div class="predictive-search__result-group">
    {%- endif -%}
    {%- if predictive_search.resources.queries.size > 0 or predictive_search.resources.collections.size > 0 -%}
      <div>
        <h2 id="predictive-search-queries" class="predictive-search__heading text-body caption-with-letter-spacing">
          {{- 'templates.search.suggestions' | t -}}
        </h2>
        <ul
          id="predictive-search-results-queries-list"
          class="predictive-search__results-list list-unstyled"
          role="group"
          aria-labelledby="predictive-search-queries"
        >
          {%- for query in predictive_search.resources.queries -%}
            <li
              id="predictive-search-option-query-{{ forloop.index }}"
              class="predictive-search__list-item"
              role="option"
              aria-selected="false"
            >
              <a href="{{ query.url }}" class="predictive-search__item link link--text" tabindex="-1">
                <div class="predictive-search__item-content predictive-search__item-content--centered">
                  <p
                    class="predictive-search__item-heading predictive-search__item-query-result h5"
                    aria-label="{{ query.text }}"
                  >
                    {{ query.styled_text }}
                  </p>
                </div>
              </a>
            </li>
          {%- endfor -%}
          {%- for collection in predictive_search.resources.collections -%}
            <li
              id="predictive-search-option-collection-{{ forloop.index }}"
              class="predictive-search__list-item"
              role="option"
              aria-selected="false"
            >
              <a href="{{ collection.url }}" class="predictive-search__item link link--text" tabindex="-1">
                <div class="predictive-search__item-content predictive-search__item-content--centered">
                  <p class="predictive-search__item-heading h5">{{ collection.title | escape }}</p>
                </div>
              </a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- endif -%}
    {%- if predictive_search.resources.articles.size > 0 or predictive_search.resources.pages.size > 0 -%}
      <div class="predictive-search__pages-wrapper">
        <h2
          id="predictive-search-pages-desktop"
          class="predictive-search__heading text-body caption-with-letter-spacing"
        >
          {{- 'templates.search.pages' | t -}}
        </h2>
        <ul
          id="predictive-search-results-pages-list-desktop"
          class="predictive-search__results-list list-unstyled"
          role="group"
          aria-labelledby="predictive-search-pages-desktop"
        >
          {%- for page in predictive_search.resources.pages -%}
            <li
              id="predictive-search-option-page-desktop-{{ forloop.index }}"
              class="predictive-search__list-item"
              role="option"
              aria-selected="false"
            >
              <a href="{{ page.url }}" class="predictive-search__item link link--text" tabindex="-1">
                <div class="predictive-search__item-content predictive-search__item-content--centered">
                  <p class="predictive-search__item-heading h5">{{ page.title | escape }}</p>
                </div>
              </a>
            </li>
          {%- endfor -%}
          {%- for article in predictive_search.resources.articles -%}
            <li
              id="predictive-search-option-article-desktop-{{ forloop.index }}"
              class="predictive-search__list-item"
              role="option"
              aria-selected="false"
            >
              <a href="{{ article.url }}" class="predictive-search__item link link--text" tabindex="-1">
                <div class="predictive-search__item-content predictive-search__item-content--centered">
                  <p class="predictive-search__item-heading h5">{{ article.title | escape }}</p>
                </div>
              </a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- endif -%}
    {%- if first_column_results_size > 0 -%}
      </div>
    {%- endif -%}
    {%- if predictive_search.resources.products.size > 0
      or predictive_search.resources.articles.size > 0
      or predictive_search.resources.pages.size > 0
    -%}
      <div class="predictive-search__result-group">
        {%- if predictive_search.resources.products.size > 0 -%}
          <div>
            <h2
              id="predictive-search-products"
              class="predictive-search__heading text-body caption-with-letter-spacing"
            >
              {{- 'templates.search.products' | t -}}
            </h2>
            <ul
              id="predictive-search-results-products-list"
              class="predictive-search__results-list list-unstyled"
              role="group"
              aria-labelledby="predictive-search-products"
            >
              {%- for product in predictive_search.resources.products -%}
                <li
                  id="predictive-search-option-product-{{ forloop.index }}"
                  class="predictive-search__list-item"
                  role="option"
                  aria-selected="false"
                >
                  <a
                    href="{{ product.url }}"
                    class="predictive-search__item predictive-search__item--link-with-thumbnail link link--text"
                    tabindex="-1"
                  >
                    {%- if product.featured_media != blank -%}
                      <img
                        class="predictive-search__image"
                        src="{{ product.featured_media | image_url: width: 300 }}"
                        alt="{{ product.featured_media.alt | escape }}"
                        width="80"
                        height="{{ 80 | divided_by: product.featured_media.preview_image.aspect_ratio }}"
                      >
                    {%- endif -%}
                    <div class="predictive-search__item-content">
                      {%- if settings.predictive_search_show_vendor -%}
                        <span class="visually-hidden">{{ 'accessibility.vendor' | t }}</span>
                        <div class="predictive-search__item-vendor caption-with-letter-spacing">
                          {{ product.vendor }}
                        </div>
                      {%- endif -%}
                      <p class="predictive-search__item-heading h5">{{ product.title | escape }}</p>
                      {% comment %} Always show price {% endcomment %}
                      <div class="predictive-search__item-price">
                        {% if product.price_varies %}
                          <span class="price">À partir de {{ product.price_min | money }}</span>
                        {% else %}
                          {% if product.compare_at_price > product.price %}
                            <span class="price price--on-sale">{{ product.price | money }}</span>
                            <span class="price price--compare">{{ product.compare_at_price | money }}</span>
                          {% else %}
                            <span class="price">{{ product.price | money }}</span>
                          {% endif %}
                        {% endif %}
                      </div>
                    </div>
                  </a>
                </li>
              {%- endfor -%}
            </ul>
          </div>
        {%- endif -%}
        {%- if predictive_search.resources.articles.size > 0 or predictive_search.resources.pages.size > 0 -%}
          <div class="predictive-search__pages-wrapper">
            <h2
              id="predictive-search-pages-mobile"
              class="predictive-search__heading text-body caption-with-letter-spacing"
            >
              {{- 'templates.search.pages' | t -}}
            </h2>
            <ul
              id="predictive-search-results-pages-list-mobile"
              class="predictive-search__results-list list-unstyled"
              role="group"
              aria-labelledby="predictive-search-pages-mobile"
            >
              {%- for page in predictive_search.resources.pages -%}
                <li
                  id="predictive-search-option-page-mobile-{{ forloop.index }}"
                  class="predictive-search__list-item"
                  role="option"
                  aria-selected="false"
                >
                  <a href="{{ page.url }}" class="predictive-search__item link link--text" tabindex="-1">
                    <div class="predictive-search__item-content predictive-search__item-content--centered">
                      <p class="predictive-search__item-heading h5">{{ page.title | escape }}</p>
                    </div>
                  </a>
                </li>
              {%- endfor -%}
              {%- for article in predictive_search.resources.articles -%}
                <li
                  id="predictive-search-option-article-mobile-{{ forloop.index }}"
                  class="predictive-search__list-item"
                  role="option"
                  aria-selected="false"
                >
                  <a href="{{ article.url }}" class="predictive-search__item link link--text" tabindex="-1">
                    <div class="predictive-search__item-content predictive-search__item-content--centered">
                      <p class="predictive-search__item-heading h5">{{ article.title | escape }}</p>
                    </div>
                  </a>
                </li>
              {%- endfor -%}
            </ul>
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}
    {%- if first_column_results_size > 0 or predictive_search.resources.products.size > 0 -%}
      </div>
    {%- endif -%}

    {%- render 'loading-spinner', class: 'predictive-search__loading-state' -%}

    <div id="predictive-search-option-search-keywords" class="predictive-search__search-for-button">
      <button
        class="predictive-search__item predictive-search__item--term link link--text h5 animate-arrow"
        tabindex="-1"
        role="option"
        aria-selected="false"
      >
        <span data-predictive-search-search-for-text>
          {{- 'templates.search.search_for' | t: terms: predictive_search.terms -}}
        </span>
        <span class="svg-wrapper">
          {{- 'icon-arrow.svg' | inline_asset_content -}}
        </span>
      </button>
    </div>
  </div>

  <span class="hidden" data-predictive-search-live-region-count-value>
    {% liquid
      assign total_results = predictive_search.resources.products.size | plus: first_column_results_size
      if total_results == 0
        echo 'templates.search.no_results' | t: terms: predictive_search.terms
      else
        echo 'templates.search.results_with_count' | t: count: total_results | append: ': '
        if predictive_search.resources.queries.size > 0
          assign count = predictive_search.resources.queries.size | plus: predictive_search.resources.collections.size
          echo 'templates.search.results_suggestions_with_count' | t: count: count | append: ', '
        endif
        if predictive_search.resources.pages.size > 0
          assign count = predictive_search.resources.pages.size | plus: predictive_search.resources.articles.size
          echo 'templates.search.results_pages_with_count' | t: count: count | append: ', '
        endif
        if predictive_search.resources.products.size > 0
          echo 'templates.search.results_products_with_count' | t: count: predictive_search.resources.products.size
        endif
      endif
    %}
  </span>
{%- endif -%}
